@model IEnumerable<Food_Collection_And_Supply.Database.FoodRequest>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container">
    <br />
    <br />
    <div class="card">

        <div class="card-body">

            <table id="tbl" class="table" data-tablesaw-mode="swipe">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Food Name</th>
                        <th>Family Numbers</th>
                        <th>Discriptions</th>
                        <th>Collection Center</th>
                        <th>Status</th>
                        <th>Actions</th>

                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.Id</td>
                            <td>@item.FoodName</td>
                            <td>@item.FamilyMember</td>
                            <td>@item.Discription</td>
                            <td>@item.City</td>
                            <td>@item.Status</td>
                            <td>
                                @if (item.Status == "Request Sent To Collection Center")
                                {
                                    <a style="cursor:pointer;" class="btn btn-primary btn-sm" title="send" onclick="Send(@item.Id,'Accepted')">Accept</a>
                                    <a style="cursor:pointer;" class="btn btn-success btn-sm" title="send" onclick="Send(@item.Id,'Rejected')">Reject</a>
                                }

                                else
                                {
                                    <b>@item.Status</b>

                                }
                            </td>





                        </tr>

                    }

                </tbody>
            </table>
        </div>
    </div>
</div>


@section scripts{
    <script>
        $(document).ready(function () {

            $("#tbl").DataTable()

        });

        var Send = function (id, status) {
            swal({
                title: 'Are you sure?',
                text: "You would not able to revert this!",
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, Send it!'
            }).then(function () {


                $.ajax({
                    url: "/Home/EvaluateRequest",
                    type: "POST",
                    data: { id: id, Status: status },
                    success: function (res) {
                        if (res == "send") {

                            swal({
                                title: "success", text: "Successfully Updated!", type: "success"
                            }).then(function () {
                                location.reload();
                            });
                        }

                        else {
                            swal('send!', "Something Wrong !", 'error');
                        }
                    }
                })

            })

        }

    </script>
}